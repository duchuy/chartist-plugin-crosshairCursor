/* chartist-plugin-crosshairCursor 2.0.3
 * Copyright Â© 2018 Sroop Sunar
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.crosshairCursor"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";c.plugins=c.plugins||{},c.plugins.crosshairCursor=function(d){function e(a){this._chart=a,this.frozen=!1,this._pointArea=m()}var f,g,h,i,j,k,l,m,n,o,p,q,r,s=[],t=function(){},u={wrapChart:function(a){var c=b.createElement("div");return c.className="crosshairCursor-wrapper",a.container.parentNode.insertBefore(c,a.container),c.appendChild(a.container),c.style.cursor="pointer",c.style.position="relative",c},x:!0,y:!0,click:t,hover:t,freezeChange:t,styles:{x:{backgroundColor:"#dedede",width:"1px",height:"95%"},y:{backgroundColor:"#dedede",width:"100%",height:"1px"}}};d=c.extend({},u,d),e.prototype.wrapChart=function(){if(this._chartWrapper)return this._chartWrapper;this._chartWrapper=d.wrapChart(this._chart)},e.prototype.create=function(){this.wrapChart(),this._crosshairCursor={},this._crosshairCursor.x=i(this._chartWrapper,"x"),this._crosshairCursor.y=i(this._chartWrapper,"y"),this.hide(this._crosshairCursor),this._chartWrapper.addEventListener("click",q.bind(this)),this._chartWrapper.addEventListener("mousemove",this.move.bind(this)),this._chartWrapper.addEventListener("mouseenter",this.show.bind(this)),this._chartWrapper.addEventListener("mouseleave",this.hide.bind(this))},e.prototype.destroy=function(){j(this._crosshairCursor),l(this._chartWrapper)},e.prototype.show=function(){n(this._crosshairCursor)},e.prototype.hide=function(){this.frozen||r(this._crosshairCursor)},e.prototype.reset=function(){this.frozen=!1,this.hide()},e.prototype.move=function(a){if(!this.frozen){var b=o.call(this._chartWrapper,a,this._crosshairCursor),c=p(b,this._pointArea);f.call(this,c)}},e.prototype.freeze=function(){this.frozen=!0,g.call(this)},e.prototype.unfreeze=function(){this.frozen=!1,g.call(this)},e.prototype.isFrozen=function(){return this.frozen},e.prototype.currentPoints=function(){return h()},e.prototype.element=function(){return this._chartWrapper},f=function(a){var b=a.map(function(a){return a.meta});d.hover(this,b),this._chart.eventEmitter.emit("crosshairCursor:hovered",b)},g=function(){d.freezeChange(this.frozen),this._chart.eventEmitter.emit("crosshairCursor:frozen",this.frozen)},h=function(){return s.filter(function(a){return a.current})},i=function(a,c){var d=b.createElement("div");d.className="crosshairCursor-"+c,a.insertBefore(d,a.firstChild);var e=a.querySelector(".crosshairCursor-"+c);return e.style.position="absolute",k(e,c),e},j=function(a){a.x.remove(),a.y.remove()},k=function(a,b){var c=d.styles[b];Object.keys(c).forEach(function(b){a.style[b]=c[b]})};var v=function(a,b,c){return a>=b-c&&a<=b+c},w=function(a){var b=c.deserialize(a.meta);return b.value=a.value,b.value.x=a.axisX.ticks[a.index],{meta:b,position:{x:Math.round(a.x),y:Math.round(a.y)},element:a.element}},x=function(a,b){b?a.element.addClass("crosshairCursor-highlight"):a.element.removeClass("crosshairCursor-highlight")},y=function(a,b,c){return d.x&&d.y?v(a.x,b.x,c)||v(a.y,b.y,c):d.x?v(a.x,b.x,c):d.y?v(a.y,b.y,c):void 0};return l=function(a){a.outerHTML=a.innerHTML},m=function(){var c=b.querySelectorAll(".ct-point");return+a.getComputedStyle(c[0])["stroke-width"].replace("px","")/2},n=function(a){d.x&&d.y?(a.x.style.display="",a.y.style.display=""):d.x?a.x.style.display="":d.y&&(a.y.style.display="")},o=function(a,b){var c={};return c.x=a.pageX-this.offsetLeft,c.y=a.pageY-this.offsetTop,b.x.style.left=c.x+"px",b.y.style.top=c.y+"px",c},p=function(a,b){return s.filter(function(c){var d=y(a,c.position,b);return x(c,d),c.current=d,d})},q=function(a){a.stopPropagation();var b=h().map(function(a){return a.meta});d.click(this,b),this._chart.eventEmitter.emit("crosshairCursor:click",b)},r=function(a){a.x.style.display="none",a.y.style.display="none"},function(a){var b=!1;if(!(a instanceof c.Line))throw"Chart must be an instance of Chartist.Line";a.on("draw",function(a){"point"===a.type&&(0===a.index&&(s=[]),s.push(w(a)))}),a.on("created",function(){b?a.crosshairCursor.reset():(b=!0,a.crosshairCursor=new e(a),a.crosshairCursor.create())})}}}(window,document,a),a.plugins.crosshairCursor});
//# sourceMappingURL=chartist-plugin-crosshairCursor.min.js.map