{"version":3,"sources":["chartist-plugin-crosshairCursor.js"],"names":["root","factory","define","amd","Chartist","returnExportsGlobal","exports","module","require","this","window","document","plugins","crosshairCursor","options","CrosshairCursor","chart","_chart","_chartWrapper","undefined","frozen","_pointArea","calculatePointArea","sendMetaData","sendFrozenStatus","currentPoints","createCrosshairCursor","destroyCrosshairCursor","styleCrosshairCursor","unwrapChart","showCrosshairCursor","moveCrosshairCursor","highlightCurrentPoints","clickFn","hideCrosshairCursor","dataPoints","noop","defaultOptions","wrapChart","chartWrapper","createElement","className","container","parentNode","insertBefore","appendChild","style","cursor","position","x","y","click","hover","frozenStatus","styles","backgroundColor","width","height","extend","prototype","create","self","_crosshairCursor","hide","addEventListener","bind","move","show","destroy","reset","e","call","highlightedPoints","freeze","unfreeze","isFrozen","element","points","meta","map","point","eventEmitter","emit","filter","current","type","div","firstChild","querySelector","remove","inPointArea","cursorPosition","pointPosition","padding","formatPointData","deserialize","value","axisX","ticks","index","Math","round","toggleHighlight","highlight","addClass","removeClass","cursorIsOnPoint","outerHTML","innerHTML","ctPoints","querySelectorAll","getComputedStyle","replace","display","crosshairCursorPosition","pageX","offsetLeft","pageY","offsetTop","left","top","pointArea","highlighted","stopPropagation","created","Line","on","data","push"],"mappings":"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","file":"chartist-plugin-crosshairCursor.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([\"chartist\"], function (Chartist) {\n      return (root.returnExportsGlobal = factory(Chartist));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"chartist\"));\n  } else {\n    root['Chartist.plugins.crosshairCursor'] = factory(Chartist);\n  }\n}(this, function (Chartist) {\n\n  /**\n   * Chartist.js plugin that generates a crosshair cursor for a line chart which highlights and notifies you of any data points that fall along the crosshair axis\n   *\n   */\n  /* global Chartist */\n  (function(window, document, Chartist) {\n    'use strict';\n\n    Chartist.plugins = Chartist.plugins || {};\n\n    Chartist.plugins.crosshairCursor = function(options) {\n      var dataPoints = [];\n      var noop = function() {};\n\n      //private methods\n      var sendMetaData, sendFrozenStatus, currentPoints, createCrosshairCursor, destroyCrosshairCursor, styleCrosshairCursor, unwrapChart, calculatePointArea, showCrosshairCursor, moveCrosshairCursor, highlightCurrentPoints, clickFn, hideCrosshairCursor;\n\n      var defaultOptions = {\n        wrapChart: function(chart) {\n          var chartWrapper = document.createElement('div');\n          chartWrapper.className = 'crosshairCursor-wrapper';\n          chart.container.parentNode.insertBefore(chartWrapper, chart.container);\n          chartWrapper.appendChild(chart.container);\n          chartWrapper.style.cursor = 'pointer';\n          chartWrapper.style.position = 'relative';\n\n          return chartWrapper;\n        },\n        x: false,\n        y: false,\n        click: noop,\n        hover: noop,\n        frozenStatus: noop,\n        styles: {\n          x: {\n            backgroundColor: '#dedede',\n            width: '1px',\n            height: '95%'\n          },\n          y: {\n            backgroundColor: '#dedede',\n            width: '100%',\n            height: '1px'\n          }\n        }\n      };\n\n      options = Chartist.extend({}, defaultOptions, options);\n\n      function CrosshairCursor(chart) {\n        this._chart = chart;\n        this._chartWrapper = undefined;\n        this.frozen = false;\n        this._pointArea = calculatePointArea();\n      }\n\n      CrosshairCursor.prototype.wrapChart = function() {\n        if(this._chartWrapper) { return this._chartWrapper; }\n\n        this._chartWrapper = options.wrapChart(this._chart);\n      };\n\n      CrosshairCursor.prototype.create = function() {\n        var self = this;\n        this.wrapChart();\n\n        self._crosshairCursor = {};\n        self._crosshairCursor.x = createCrosshairCursor(self._chartWrapper, 'x');\n        self._crosshairCursor.y = createCrosshairCursor(self._chartWrapper, 'y');\n        self.hide(self._crosshairCursor);\n\n        self._chartWrapper.addEventListener('click', clickFn.bind(self));\n        self._chartWrapper.addEventListener('mousemove', self.move.bind(self));\n        self._chartWrapper.addEventListener('mouseenter', self.show.bind(self));\n        self._chartWrapper.addEventListener('mouseleave', self.hide.bind(self));\n      };\n\n      CrosshairCursor.prototype.destroy = function() {\n        var self = this;\n\n        destroyCrosshairCursor(self._crosshairCursor);\n\n        unwrapChart(self._chartWrapper);\n      };\n\n      CrosshairCursor.prototype.show = function() {\n        showCrosshairCursor(this._crosshairCursor);\n      };\n\n      CrosshairCursor.prototype.hide = function() {\n        if(!this.frozen) {\n          hideCrosshairCursor(this._crosshairCursor);\n        }\n      };\n\n      CrosshairCursor.prototype.reset = function() {\n        this.frozen = false;\n        this.hide();\n      };\n\n      CrosshairCursor.prototype.move = function(e) {\n        if(!this.frozen){\n          var position = moveCrosshairCursor.call(this._chartWrapper, e, this._crosshairCursor);\n          var highlightedPoints = highlightCurrentPoints(position, this._pointArea);\n          sendMetaData.call(this, highlightedPoints);\n        }\n      };\n\n      CrosshairCursor.prototype.freeze = function() {\n        this.frozen = true;\n        sendFrozenStatus.call(this);\n      };\n\n      CrosshairCursor.prototype.unfreeze = function() {\n        this.frozen = false;\n        sendFrozenStatus.call(this);\n      };\n\n      CrosshairCursor.prototype.isFrozen = function() {\n        return this.frozen;\n      };\n\n      CrosshairCursor.prototype.currentPoints = function() {\n        return currentPoints();\n      };\n\n      CrosshairCursor.prototype.element = function() {\n        return this._chartWrapper;\n      };\n\n      sendMetaData = function(points) {\n        var meta = points.map(function(point) {\n          return point.meta;\n        });\n        options.hover(this, meta);\n        this._chart.eventEmitter.emit('crosshairCursor:hovered', meta);\n      };\n\n      sendFrozenStatus = function() {\n        options.frozenStatus(this.frozen);\n        this._chart.eventEmitter.emit('crosshairCursor:frozen', this.frozen);\n      };\n\n      currentPoints = function() {\n        return dataPoints.filter(function(point) {\n          return point.current;\n        });\n      };\n\n      createCrosshairCursor = function(chartWrapper, type) {\n        var div = document.createElement('div');\n        div.className = 'crosshairCursor-' + type;\n        chartWrapper.insertBefore(div, chartWrapper.firstChild);\n        var crosshairCursor = chartWrapper.querySelector('.crosshairCursor-' + type);\n        crosshairCursor.style.position = 'absolute';\n\n        styleCrosshairCursor(crosshairCursor, type);\n\n        return crosshairCursor;\n      };\n\n      destroyCrosshairCursor = function(crosshairCursor) {\n        crosshairCursor.x.remove();\n        crosshairCursor.y.remove();\n      };\n\n      styleCrosshairCursor = function(crosshairCursor, type) {\n        crosshairCursor.style.height = options.styles[type].height;\n        crosshairCursor.style.width = options.styles[type].width;\n        crosshairCursor.style.backgroundColor = options.styles[type].backgroundColor;\n      };\n\n      var inPointArea = function(cursorPosition, pointPosition, padding) {\n        return (cursorPosition >= (pointPosition - padding) && cursorPosition <= (pointPosition + padding));\n      };\n\n      var formatPointData = function(point) {\n        var meta = Chartist.deserialize(point.meta);\n        meta.value = point.value;\n        meta.value.x = point.axisX.ticks[point.index];\n        return {\n          meta: meta,\n          position: {x: Math.round(point.x), y: Math.round(point.y)},\n          element: point.element\n        };\n      };\n\n      var toggleHighlight = function(point, highlight) {\n        if(highlight) {\n          point.element.addClass('crosshairCursor-highlight');\n        } else {\n          point.element.removeClass('crosshairCursor-highlight');\n        }\n      };\n\n      var cursorIsOnPoint = function(cursorPosition, pointPosition, padding) {\n        if(options.x && options.y) {\n          return inPointArea(cursorPosition.x, pointPosition.x, padding) || inPointArea(cursorPosition.y, pointPosition.y , padding);\n        } else if(options.x) {\n          return inPointArea(cursorPosition.x, pointPosition.x, padding);\n        } else if(options.y) {\n          return inPointArea(cursorPosition.y, pointPosition.y , padding);\n        }\n      };\n\n      unwrapChart = function(chartWrapper) {\n        chartWrapper.outerHTML = chartWrapper.innerHTML;\n      };\n\n      calculatePointArea = function() {\n        var ctPoints = document.querySelectorAll('.ct-point');\n        var pointWidth = window.getComputedStyle(ctPoints[0])['stroke-width'].replace('px', '');\n        return +pointWidth/2;\n      };\n\n      showCrosshairCursor = function(crosshairCursor){\n        if(options.x && options.y) {\n          crosshairCursor.x.style.display = '';\n          crosshairCursor.y.style.display = '';\n        } else if(options.x) {\n          crosshairCursor.x.style.display = '';\n        } else if(options.y) {\n          crosshairCursor.y.style.display = '';\n        }\n      };\n\n      moveCrosshairCursor = function(e, crosshairCursor){\n        var crosshairCursorPosition = {};\n\n        crosshairCursorPosition.x = e.pageX - this.offsetLeft;\n        crosshairCursorPosition.y = e.pageY - this.offsetTop;\n\n        crosshairCursor.x.style.left = crosshairCursorPosition.x + 'px';\n        crosshairCursor.y.style.top = crosshairCursorPosition.y + 'px';\n\n        return crosshairCursorPosition;\n      };\n\n      highlightCurrentPoints = function(crosshairCursorPosition, pointArea) {\n        return dataPoints.filter(function(point) {\n          var highlighted = cursorIsOnPoint(crosshairCursorPosition, point.position, pointArea);\n          toggleHighlight(point, highlighted);\n          point.current = highlighted;\n          return highlighted;\n        });\n      };\n\n      clickFn = function(e) {\n        e.stopPropagation();\n        var meta = currentPoints().map(function(point) {\n          return point.meta;\n        });\n        options.click(this, meta);\n        this._chart.eventEmitter.emit('crosshairCursor:click', meta);\n      };\n\n      hideCrosshairCursor = function(crosshairCursor){\n        crosshairCursor.x.style.display = 'none';\n        crosshairCursor.y.style.display = 'none';\n      };\n\n      return function crosshairCursor(chart) {\n        var created = false;\n\n        if(chart instanceof Chartist.Line) {\n\n          chart.on('draw', function(data) {\n            if(data.type === 'point') {\n              if(data.index === 0) { dataPoints = []; }\n              dataPoints.push(formatPointData(data));\n            }\n          });\n\n          chart.on('created', function() {\n            if(!created) {\n              created = true;\n              chart.crosshairCursor = new CrosshairCursor(chart);\n              chart.crosshairCursor.create();\n            } else {\n              chart.crosshairCursor.reset();\n            }\n          });\n\n        }\n\n      };\n    };\n\n\n  }(window, document, Chartist));\n  return Chartist.plugins.crosshairCursor;\n\n}));\n"]}